<!-- page content -->
<div class="vista">

    <div class="page-title">
        <div class="title_left">

            <ol class="breadcrumb miga">
                <li>
                    <i class="sg sg-software-des"></i>
                    <a ui-sref="SoftwarePersonal">Software / Mi Software</a>
                </li>
                <li class="active">Agregar</li>
            </ol>

        </div>
    </div>
    <div class="clearfix"></div>
    <div class="row">
        <div class="col-md-12 col-sm-12 col-xs-12">
            <div class="x_panel">
                <div class="x_title">
                    <h2>Informaci&oacute;n general
                        <small>&iquest;De qu&eacute; se trata el software?</small>
                    </h2>

                    <div class="clearfix"></div>
                </div>
                <div class="x_content sin-desborde">

                    <form name="form" id="form" ng-submit="save()" class="form-horizontal">

                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">
                                T&iacute;tulo del software
                                <span class="required">*</span>
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input type="text" ng-model="SoftwarePersonal.nombre" placeholder="T&iacute;tulo del software" required class="form-control col-md-7 col-xs-12"
                                    name="nombre" ng-minlength="4" maxlength="300" />
                                <span class="error" ng-show="form.nombre.$dirty && form.nombre.$invalid">
                                    Dato incorrecto, se espera una longitud m&iacute;nima de 4
                                </span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="last-name">
                                Tipo de software
                                <span class="required">*</span>
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <select id="tipoSoftwareId" name="tipoSoftwareId" class="form-control col-md-7 col-xs-12" ng-model="SoftwarePersonal.tipoSoftwareId"
                                    ng-options="e.tipoSoftwareId as e.nombre  for e in listaTipoSoftware" required>
                                    <option value="">-- Seleccione el tipo de software -- </option>
                                </select>
                                <span class="error" ng-show="form.tipoSoftwareId.$dirty &&  ((!form.tipoSoftwareId.$valid) || form.tipoSoftwareId.$modelValue==null)  ">
                                    Seleccione el tipo de software
                                </span>
                            </div>
                        </div>


                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Descripci&oacute;n
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">

                                <textarea ng-model="SoftwarePersonal.descripcionFuncional" maxlength="600" class="form-control col-md-7 col-xs-12" placeholder="Explique su uso y aplicaci&oacute;n"
                                    name="descripcionFuncional" ng-maxlength="600"></textarea>
                                <span class="error" ng-show="form.descripcionFuncional.$dirty && form.descripcionFuncional.$invalid">
                                    Dato incorrecto, se espera una longitud m&iacute;nima de 10 y m&aacute;xima de 600
                                </span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Derecho de autor
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">

                                <div derechos-autor-select state-form="ValidForm" template-url="app/vistasGenericas/directivas/buscarDerechosAutorDirective/buscarDerechosAutorDirective.html"
                                    ng-model="derechosAutor"> </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Observaciones
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">

                                <input type="text" ng-model="SoftwarePersonal.derechoAutor" class="form-control col-md-7 col-xs-12" name="derechoAutor" ng-minlength="4"
                                    ng-maxlength="100" maxlength="100" placeholder="Observaciones sobre el estado del derecho de autor" />
                                <span class="error" ng-show="form.derechoAutor.$dirty && form.derechoAutor.$invalid">
                                    Dato incorrecto, se espera una longitud m&iacute;nima de 4
                                </span>
                            </div>

                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Comentarios
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input type="text" ng-model="SoftwarePersonal.comentarios" class="form-control col-md-7 col-xs-12" name="comentarios" placeholder="Comentarios"
                                    ng-maxlength="300" maxlength="300" />
                                <span class="error" ng-show="form.comentarios.$dirty && form.comentarios.$invalid">
                                    Dato requerido con una longitud m&aacute;xima de 300
                                </span>
                            </div>
                        </div>

                        <div class="x_title">
                            <h2>Informaci&oacute;n t&eacute;cnica</h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                A&ntilde;o de la versi&oacute;n *
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input type="text" ng-model="SoftwarePersonal.anioVersion" class="form-control col-md-7 col-xs-12 numbersOnly" maxlength="4"
                                    placeholder="A&ntilde;o en el que se desarrollo el software" name="anioVersion" ng-maxlength="4"
                                    min="1975" max="{{anioActual}}" required />
                                <!--<span class="error" ng-show="form.anioVersion.$dirty && !form.anioVersion.$valid">
                A&ntilde;o a cuatro d&iacute;gitos<br />
                y el a A&ntilde;o debe estar en el rango: 1975 - {{anioActual}}
            </span>-->

                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                N&uacute;mero de Versi&oacute;n *
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input type="text" ng-model="SoftwarePersonal.numeroVersion" class="form-control col-md-7 col-xs-12" placeholder="Versi&oacute;n del software"
                                    name="numeroVersion" ng-pattern="/^[0-9]{1,2}(\.[0-9]{1,2})?$/" maxlength="5" required />
                                <span class="error" ng-show="form.numeroVersion.$dirty && form.numeroVersion.$invalid">
                                    Ejemplo: 10.05
                                    <br /> Dato incorrecto, se espera un entero y/o decimal de m&aacute;ximo 2 digitos (cada uno)
                                </span>
                                <!--{{form.numeroVersion | json}}-->
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Plataforma de desarrollo
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">

                                <input type="text" ng-model="SoftwarePersonal.plataformaDesarrollo" class="form-control col-md-7 col-xs-12" placeholder="Hardware y Software utilizado, incluyendo su versi&oacute;n"
                                    name="plataformaDesarrollo" ng-minlength="6" ng-maxlength="200" maxlength="200" />
                                <span class="error" ng-show="form.plataformaDesarrollo.$dirty && form.plataformaDesarrollo.$invalid">
                                    Dato incorrecto, se espera una longitud m&iacute;nima de 6
                                </span>
                            </div>
                        </div>
                        <div class="x_title">
                            <h2>Documentaci&oacute;n
                                <small>Tama&ntilde;o m&aacute;ximo por archivo de 20 MB, el formato de los archivos puede ser: PDF,
                                    DOC, DOCX</small>
                            </h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Manual de usuario*
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input class="input-file form-control col-md-7 col-xs-12" type="file" name="manualUsuario" id="manualUsuario" ng-model="manualUsuario"
                                    data-buttonName="btn-success" placeholder="Adjunte el manual de usuario" onchange="angular.element(this).scope().getFileDetails(this, 'pdf;doc;docx');"
                                />
                                <span class="error" ng-show="form.manualUsuario.$dirty && !form.manualUsuario.$valid">Se requiere documento adjunto</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Manual T&eacute;cnico*
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input class="input-file form-control col-md-7 col-xs-12" type="file" name="manualTecnico" id="manualTecnico" ng-model="manualTecnico"
                                    data-buttonName="btn-success" placeholder="Adjunte el manual T&eacute;cnico " onchange="angular.element(this).scope().getFileDetails(this, 'pdf;doc;docx');"
                                />
                                <span class="error" ng-show="form.manualTecnico.$dirty && !form.manualTecnico.$valid">Se requiere documento adjunto</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                C&oacute;digo fuente
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input class="input-file form-control col-md-7 col-xs-12" type="file" name="codigoFuente" id="codigoFuente" data-buttonName="btn-success"
                                    ng-model="codigoFuente" placeholder="Adjunte el c&oacute;digo fuente " onchange="angular.element(this).scope().getFileDetails(this, '*');"
                                />
                                <span class="error" ng-show="form.codigoFuente.$dirty && !form.codigoFuente.$valid">Se requiere documento adjunto</span>
                            </div>
                        </div>
                        <div class="x_title">
                            <h2>Origen</h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Proyecto *
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <div class="row">
                                    <div ng-class="SoftwarePersonal.proyectoId == null  ? 'col-xs-10' : (SoftwarePersonal.proyectoId != null ? 'col-xs-9' : 'col-xs-9')">
                                        <input type="text" class="form-control" id="usr" placeholder="Seleccione el proyecto en el que se desarrollo el software"
                                            name="proyecto" ng-model="SoftwarePersonal.proyectoNombre" disabled>
                                    </div>
                                    <div ng-class="SoftwarePersonal.proyectoId == null  ? 'col-xs-2' : (SoftwarePersonal.proyectoId != null ? 'col-xs-3' : 'col-xs-3')">
                                        <a class="btn btn-success" ng-click="openProyecto()" title="Buscar proyecto" ng-disabled="desabilitar">
                                            <span class="glyphicon glyphicon-search"></span>
                                        </a>
                                        <button type="button" ng-if="SoftwarePersonal.proyectoId!=null" class="btn btn-danger" ng-click="clean()">
                                            <i class="glyphicon glyphicon-remove" title="borrar"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="x_title">
                            <h2>Autores del software</h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Autores
                                <span class="required">*</span>
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <a ng-click="openUser()" class="btn btn-success">
                                    <span class="fa fa-user-plus"></span> Buscar
                                </a>

                                <div ng-show="SoftwarePersonal.autores.length > 0">
                                    <table id="MTSoftwarePersonalAdd" class="table table-hover table-striped table-condensed dt-responsive" cellspacing="0" datatable="ng"
                                        width="100%" dt-options="dtOptions">
                                        <thead>
                                            <tr>
                                                <th>Clave</th>
                                                <th data-priority="1">Nombre</th>
                                                <th data-priority="3" class="thAjuste text-center">Opciones</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="autor in SoftwarePersonal.autores">
                                                <td>{{autor.claveAutor}}</td>
                                                <td>{{autor.nombreCompleto}}</td>
                                                <td class="text-center">
                                                    <div>
                                                        <a ng-hide="authentication.userprofile.clavePersona===autor.claveAutor" title="Eliminar" ng-click="eliminarAutor(autor)"
                                                            class="btn btn-danger">
                                                            <i class="glyphicon glyphicon-trash"></i>
                                                        </a>
                                                        <!--<a ng-hide="authentication.userprofile.clavePersona===autor.claveAutor"
                                       title="Eliminar" ng-click="deleteJP()" class="btn btn-danger">
                                        <i class="glyphicon glyphicon-trash"></i>
                                    </a>-->
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <div class="x_title">
                            <h2>Seguridad</h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Tipo de acceso
                                <span class="required">*</span>
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <select id="tipoAcceso" name="tipoAcceso" ng-required="true" class="form-control col-md-7 col-xs-12" ng-model="SoftwarePersonal.tipoAcceso"
                                    ng-options="e.tipoAccesoId as e.nombre for e in selectTipo" required>
                                    <option value="">--Seleccione el tipo de acceso--</option>
                                </select>
                                <span class="error" ng-show="form.tipoAcceso.$dirty &&  ((!form.tipoAcceso.$valid) || form.tipoAcceso.$modelValue==null)  ">
                                    Seleccione el tipo de acceso
                                </span>
                            </div>
                        </div>

                        <div class="ln_solid"></div>
                        <div class="form-group">
                            <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
                                <div class="">

                                    <button type="submit" class="btn btn-success">
                                        <i class="glyphicon glyphicon-saved"></i> Guardar
                                    </button>
                                    <button type="button" confirma-regresar="globalRegresar()" state-form="form" class="btn btn-primary">
                                        <span class="fa fa-arrow-left"></span>
                                        Regresar
                                    </button>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>

</div>
<!-- end page content -->
<script>
    $(document).ready(function () {
        jQuery('.numbersOnly').keyup(function () {
            this.value = this.value.replace(/[^0-9\.]/g, '');
        });
    });

</script>