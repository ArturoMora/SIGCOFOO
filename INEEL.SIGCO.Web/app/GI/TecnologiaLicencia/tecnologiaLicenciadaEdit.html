<div class="vista">
    <div class="page-title">
        <div class="title_left">
            <ol class="breadcrumb miga">
                <li>
                    <i class="glyphicon glyphicon-file"></i>
                    <a ui-sref="tecnologiaLicenciada">Tecnolog&iacute;as licenciadas/ Mis tecnolog&iacute;as licenciadas</a>
                </li>
                <li class="active">Editar</li>
            </ol>
        </div>
    </div>
    <div class="clearfix"></div>
    <form name="ValidForm" id="form" ng-submit="update()" class="form-horizontal">
        <div class="row">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                    <div class="x_content ">

                        <div class="x_title">
                            <h2>Informaci&oacute;n general</h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                N&uacute;mero de tecnolog&iacute;a licenciada
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input numbers-only ng-disabled="true" type="text" maxlength="5" class="form-control col-md-7 col-xs-12" placeholder="Ingresa el número de tecnología licenciada..."
                                    name="especialidad" ng-model="registro.numero">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Producto
                                <span class="required">*</span>
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <div productosgi-select state-form="ValidForm" arreglo="false" ng-model="producto"> </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Tecnolog&iacute;a licenciada
                                <span class="required">*</span>
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <!--<textarea type="text" ng-maxlength="300" ng-required="true" placeholder="Ingresa la tecnología licenciada..." class="form-control" ng-model="registro.nombreTecnologiaLic" disabled></textarea>-->
                                <a href="indexGI.html#/detalleProductoInnovador/{{registro.productoId}}" target="_blank" class="linkTabla">{{registro.nombreTecnologiaLic}}</a>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Receptor de la tecnolog&iacute;a licenciada*
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <div aliados-select arreglo="false" state-form="ValidForm" ng-model="Aliado"></div>
                            </div>
                        </div>


                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <!--<textarea type="text" ng-maxlength="300" class="form-control" ng-model="registro.nombreReceptor" disabled></textarea>-->
                                <a href="indexCR.html#/detallesAliado/{{registro.aliadoId}}" target="_blank" class="linkTabla">{{registro.nombreReceptor}}</a>

                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Convenio principal*
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <div convenios-by-aliado-select state-form="ValidForm" aliado-id="registro.aliadoId" ng-model="Convenio1"></div>
                                <a href="indexCR.html#/detallesConvenio/{{Convenio1.convenioId}}" target="_blank" class="linkTabla">{{Convenio1.objetoConvenio}}</a>

                                <!--Convenio.convenioId-->
                            </div>
                        </div>
                        <!--convenio:{{Convenio1 | json}}<br /><br />
                        registro:{{registro | json}}-->
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Estado del licenciamiento
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <select ng-show="mostrar==false" ng-disabled="true" ng-model="registro.estadoLicenciamientoId" ng-options="estado.id as estado.descripcion for estado in estados "
                                    class="form-control"></select>
                                <select ng-show="mostrar==true" ng-model="registro.estadoLicenciamientoId" ng-options="estado.id as estado.descripcion for estado in estados "
                                    class="form-control"></select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Proyecto
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <input ng-disabled="true" type="text" class="form-control col-md-7 col-xs-12" ng-model="registro.proyectoNombre">
                            </div>
                            <div class="col-md-3 col-sm-3 col-xs-12">
                                <a class="btn btn-success" ng-click="openProyecto()" title="Buscar proyecto">
                                    <i class="glyphicon glyphicon-search"></i>
                                </a>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">

                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <div class="alert informacion col-xs-12">
                                    <span class="glyphicon glyphicon-info-sign"></span> Nota: Para modificar el estado de licenciamiento es necesario completar la informaci&oacute;n
                                    de la secci&oacute;n 'Informaci&oacute;n general' y 'Per&iacute;odo de la tecnolog&iacute;a
                                    licenciada'
                                </div>
                            </div>
                        </div>


                        <!--{{registro}}-->
                        <br />
                        <div class="x_title">
                            <h2>Per&iacute;odo de la tecnolog&iacute;a licenciada</h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="form-group">

                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Inicio
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <div class="row">
                                    <div class="col-xs-10">
                                        <input placeholder="dd/mm/yyyy" maxlength="10" ng-init="open=false" ng-change="fechsaInicioVer()" type="text" show-button-bar="false"
                                            popup-placement="bottom" class="form-control" ng-minlength="8" name="fechaInicio"
                                            uib-datepicker-popup="dd/MM/yyyy" ng-model="registro.fechaInicio" value="{{ date | date: 'dd/MM/yyyy' }}"
                                            is-open="open" close-text="Close" />
                                        <span ng-show="ValidForm.fechaInicio.$dirty &&  ValidForm.fechaInicio.$invalid" class="error">Formato inválido 'dd/MM/yyyy'</span>
                                    </div>
                                    <div class="col-xs-2">
                                        <button type="button" class="btn btn-success" ng-click="open=true">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                T&eacute;rmino
                            </label>

                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <div class="row">
                                    <div class="col-xs-10">
                                        <input placeholder="dd/mm/yyyy" ng-change="fechsaInicioVer()" name="fechaTermino" ng-minlength="8" ng-init="open2=false"
                                            type="text" show-button-bar="false" popup-placement="bottom" class="form-control"
                                            uib-datepicker-popup="dd/MM/yyyy" ng-model="registro.fechaTermino" value="{{ date | date: 'dd/MM/yyyy' }}"
                                            is-open="open2" close-text="Close" />
                                        <span ng-show="ValidForm.fechaTermino.$dirty &&  ValidForm.fechaTermino.$invalid" class="error">Formato inválido 'dd/MM/yyyy'</span>
                                    </div>
                                    <div class="col-xs-2">
                                        <button type="button" class="btn btn-success" ng-click="open2=true">
                                            <i class="glyphicon glyphicon-calendar"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="x_panel">
                    <div class="x_title">
                        <h2>Propiedad industrial y Derechos de autor</h2>
                        <ul class="nav navbar-right panel_toolbox">
                            <li>
                                <a class="collapse-link">
                                    <i class="fa fa-chevron-up"></i>
                                </a>
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </div>
                    <div class="x_content">
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Propiedad industrial
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <div propiedad-industrial-select state-form="ValidForm" ng-model="propiedadW"> </div>
                            </div>
                        </div>
                        <!--registro:{{registro.tecnologiaLicenciadaPIPIndustrial | json}}-->
                        <div class="form-group" ng-if="registro.tecnologiaLicenciadaPIPIndustrial.length>0">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">

                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <table id="CHPonenciaAdd" class="table table-hover table-striped table-condensed dt-responsive" cellspacing="0" width="100%"
                                    dt-options="dtOptions">
                                    <thead>
                                        <tr>
                                            <th data-priority="1">Nombre</th>
                                            <th>Tipo</th>
                                            <th>Expediente</th>
                                            <th data-priority="1" class="thAjuste text-center">Opciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="registro in registro.tecnologiaLicenciadaPIPIndustrial">
                                            <td>{{registro.propiedadIndustrial.titulo}}</td>
                                            <!--<td>{{registro.propiedadIndustrial | json}}</td>-->
                                            <td>
                                                {{registro.propiedadIndustrial.tipoPropiedadIndustrial.descripcion}}
                                            </td>
                                            <td>
                                                {{registro.propiedadIndustrial.expediente}}
                                            </td>
                                            <td class="text-center">
                                                <div>
                                                    <a ng-if="rolId == 15 || rolId == 1025" title="Eliminar" ng-really-click="eliminarPI(registro)" class="btn btn-danger">
                                                        <i class="glyphicon glyphicon-trash"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!--{{registro.tecnologiaLicenciadaPIPIndustrial | json}}-->
                        <div class="clearfix"></div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Derechos de autor
                            </label>

                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <div derechos-autor-select state-form="ValidForm" ng-model="derechoAutorW"> </div>
                            </div>
                        </div>
                        <!--{{registro.tecnologiaLicenciadaPIDA | json}}-->
                        <div class="form-group" ng-if="registro.tecnologiaLicenciadaPIDA.length>0">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">

                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <table id="CHPonenciaAdd" class="table table-hover table-striped table-condensed dt-responsive" cellspacing="0" width="100%"
                                    dt-options="dtOptions">
                                    <thead>
                                        <tr>
                                            <th data-priority="1">Nombre</th>
                                            <th>Rama</th>
                                            <th>Certificado</th>
                                            <th data-priority="1" class="thAjuste text-center">Opciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="registro in registro.tecnologiaLicenciadaPIDA">
                                            <td>{{registro.derechosAutor.titulo}}</td>
                                            <td>
                                                {{registro.derechosAutor.rama.descripcion}}
                                            </td>
                                            <td>
                                                {{registro.derechosAutor.certificado}}
                                            </td>
                                            <td class="text-center">
                                                <div>
                                                    <a ng-if="rolId == 15 || rolId == 1025" title="Eliminar" ng-really-click="eliminarDA(registro)" class="btn btn-danger">
                                                        <i class="glyphicon glyphicon-trash"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!--{{registro.tecnologiaLicenciadaPIDA | json}}-->

                    </div>
                </div>
                <div class="x_panel">
                    <div class="x_content sin-desborde">

                        <div class="x_title">
                            <h2>Gerencias</h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Unidad Organizacional*
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <div uo-modal ng-model="registro.nuevasGerencias" state-form="ValidForm" template-url="app/vistasGenericas/uomodalSeleccione.html"
                                    enarreglo="true"></div>
                            </div>
                        </div>
                        <div class="form-group" ng-show="registro.gerencias.length>0 || registro.nuevasGerencias.length>0">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Unidades Organizacionales
                            </label>

                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <table class="table table-hover table-striped table-condensed dt-responsive" cellspacing="0" width="100%" dt-options="dtOptions">
                                    <thead>
                                        <tr>
                                            <th data-priority="1">Nombre</th>
                                            <th data-priority="1" class="thAjuste text-center">Opciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="area in registro.gerencias">
                                            <td>{{area.nombreUnidad}}</td>
                                            <td class="text-center">
                                                <div>
                                                    <a title="Eliminar" ng-really-click="eliminaUnidadAnterior(area)" class="btn btn-danger">
                                                        <i class="glyphicon glyphicon-trash"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr ng-repeat="area in registro.nuevasGerencias">
                                            <td>{{area.nombreUnidad}}</td>
                                            <td class="text-center">
                                                <div>
                                                    <a title="Eliminar" ng-really-click="eliminaUnidadNueva(area)" class="btn btn-danger">
                                                        <i class="glyphicon glyphicon-trash"></i>
                                                    </a>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!--<div class="clearfix"></div>
                        <div class="form-group">
                            <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
                                <div class="">
                                    <button type="submit" class="btn btn-success">
                                        <i class="glyphicon glyphicon-saved"></i> Actualizar
                                    </button>
                                    <button type="button" ui-sref="tecnologiaLicenciada" class="btn btn-primary">
                                        <span class="fa fa-arrow-left"></span> Regresar
                                    </button>
                                </div>
                            </div>
                        </div>-->
                    </div>
                </div>
                <div class="x_panel">
                    <div class="x_content sin-desborde">
                        <div class="x_title">
                            <h2>Pagos programados</h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="form-group">
                            <label class="tit col-xs-12">
                                Fecha
                            </label>
                            <div class="cont col-xs-4">
                                <input placeholder="dd/mm/yyyy" maxlength="10" ng-init="open4=false" type="text" show-button-bar="false" popup-placement="bottom"
                                    class="form-control col-lg-4 col-md-4 col-xs-12" ng-minlength="8" name="fechaInicio" uib-datepicker-popup="dd/MM/yyyy"
                                    ng-model="pago.fecha" value="{{ date | date: 'dd/MM/yyyy' }}" is-open="open4" close-text="Close"
                                />
                                <span ng-show="ValidForm.fechaInicio.$dirty &&  ValidForm.fechaInicio.$invalid" class="error">Formato inválido 'dd/MM/yyyy'</span>
                            </div>
                            <div class="cont col-xs-8">
                                <button type="button" class="btn btn-success" ng-click="open4=true">
                                    <i class="glyphicon glyphicon-calendar"></i>
                                </button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="tit col-xs-12">
                                Tipo de pago programado
                            </label>
                            <div class="cont col-xs-4">
                                <select ng-model="pago.tipoPago" ng-options="tipoPago as tipoPago.descripcion for tipoPago in tipoPagos " class="form-control">
                                    <option value="">--- Seleccione un tipo de pago ---</option>
                                </select>
                            </div>
                            <div class="cont col-xs-8">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="tit col-xs-12">
                                Descripci&oacute;n
                            </label>
                            <div class="cont col-xs-4">
                                <textarea type="text" ng-maxlength="300" placeholder="Ingresa una descripción..." class="form-control" ng-model="pago.descripcion"></textarea>
                            </div>
                            <div class="cont col-xs-8">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="tit col-xs-12">
                                Monto
                            </label>
                            <div class="cont col-xs-4">
                                <input class="form-control" maxlength="7" name="puntuacion" valid-number ng-model="pago.monto" placeholder="0.00" allow-decimal="true"
                                    allow-negative="false" type="text">
                            </div>
                            <div class="cont col-xs-8">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="tit col-xs-12">
                                <button type="button" ng-click="addPago()" class="btn btn-success">
                                    <i class="glyphicon glyphicon-saved"></i> Agregar
                                </button>
                            </label>
                        </div>
                        <div class="form-group" ng-show="registro.pagos.length>0">
                            <table id="STLEdit" class="table table-hover" cellspacing="0" datatable="ng" dt-options="dtOptions">
                                <thead>
                                    <tr>
                                        <th data-priority="1">Fecha</th>
                                        <th data-priority="1">Tipo pago</th>
                                        <th data-priority="1">Descripcí&oacute;n</th>
                                        <th data-priority="1">($) Monto</th>
                                        <th data-priority="1">Opciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="reg in registro.pagos">
                                        <td>{{reg.fecha | date: 'dd/MM/yyyy'}}</td>
                                        <td>{{reg.tipoPagoDesc}}</td>
                                        <td>{{reg.descripcion}}</td>
                                        <td>{{reg.monto}}</td>
                                        <td>
                                            <a title="Eliminar" ng-if="reg.id==0" ng-really-click="delete(registro)" class="btn btn-danger">
                                                <i class="glyphicon glyphicon-trash"></i>
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- <div class="x_panel" ng-show="registro.pagos.length>0">
                    <div class="x_content sin-desborde">
                        <div class="x_title">
                            <h2>Pagos</h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="form-group">
                            <table id="CHPonenciaAdd" class="table table-hover" cellspacing="0" datatable="ng" dt-options="dtOptions">
                                <thead>
                                    <tr>
                                        <th data-priority="1">Fecha</th>
                                        <th data-priority="1">Tipo pago</th>
                                        <th data-priority="1">Descripcí&oacute;n</th>
                                        <th data-priority="1">($) Monto</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="reg in registro.pagos">
                                        <td>{{reg.fecha | date: 'yyyy/MM/dd'}}</td>
                                        <td>{{reg.tipoPagos.descripcion}}</td>
                                        <td>{{reg.descripcion}}</td>
                                        <td>{{reg.monto}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div> -->
                <div class="x_panel">
                    <div class="x_content sin-desborde">
                        <div class="x_title">
                            <h2>Lecciones aprendidas</h2>
                            <div class="clearfix"></div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">
                                Comentario
                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <textarea type="text" ng-maxlength="300" placeholder="Ingresa una descripción..." class="form-control" ng-model="leccion.comentario"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-md-3 col-sm-3 col-xs-12">

                            </label>
                            <div class="col-md-6 col-sm-6 col-xs-12">
                                <button type="button" ng-click="addLeccion()" class="btn btn-success">
                                    <i class="glyphicon glyphicon-saved"></i> Agregar
                                </button>
                                <div class="alert informacion">
                                    De clic en
                                    <b>actualizar</b> para registrar su Lecci&oacute;n aprendida
                                </div>
                            </div>
                        </div>
                        <!--<div class="form-group">
                            <label class="tit col-xs-12">
                                <button type="button" ng-click="addLeccion()" class="btn btn-success">
                                    <i class="glyphicon glyphicon-saved"></i> Agregar
                                </button>
                            </label>
                        </div>-->
                        <div class="form-group" ng-show="lecciones.length>0">
                            <br />
                            <br />
                            <table id="STLEdit" class="table table-hover" cellspacing="0" datatable="ng" dt-options="dtOptions">
                                <thead>
                                    <tr>
                                        <th data-priority="1">Fecha</th>
                                        <th data-priority="1">Comentario</th>
                                        <th data-priority="1">Registro</th>
                                        <th data-priority="1">Opciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="reg in lecciones">
                                        <td>
                                            <a class="hidden">{{reg.fecha | date: 'yyyy/MM/dd'}}</a> {{reg.fecha | date: 'dd/MM/yyyy'}}</td>
                                        <td>{{reg.comentario}}</td>
                                        <td ng-if="reg.tipo==1">GCyDN</td>
                                        <td ng-if="reg.tipo==2">GAJ</td>
                                        <td ng-if="reg.tipo==3">Gerencia tecnica</td>
                                        <td>
                                            <a title="Eliminar" ng-if="reg.id==0" ng-really-click="deleteLeccion(reg)" class="btn btn-danger">
                                                <i class="glyphicon glyphicon-trash"></i>
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="x_panel">
                    <div class="x_content sin-desborde">
                        <div class="clearfix"></div>
                        <div class="form-group">
                            <div class="col-md-3"></div>
                            <div class="alert informacion col-md-6">
                                De clic en
                                <b>actualizar</b> para registrar todos los cambios que haya efectuado
                            </div>
                            <div class="col-md-3"></div>
                            <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
                                <div class="">
                                    <button type="submit" class="btn btn-success">
                                        <i class="glyphicon glyphicon-saved"></i> Actualizar
                                    </button>
                                    <button type="button" confirma-regresar="globalRegresar()" state-form="ValidForm" class="btn btn-primary">
                                        <span class="fa fa-arrow-left"></span> Regresar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>